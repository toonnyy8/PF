<!doctype html>
<html>

<head>
    <script src="./include.js"></script>
    <link href=".\Flat-UI-master\dist\css\vendor\bootstrap\css\bootstrap.min.css" rel="stylesheet">
    <link href=".\Flat-UI-master\dist\css\flat-ui.min.css" rel="stylesheet">
    <script>
        window.$ = window.jQuery = require("./Flat-UI-master/dist/js/vendor/jquery.min.js");
    </script>
    <script src="./Flat-UI-master/dist/js/flat-ui.min.js" rel="stylesheet"></script>
    <script src="./Flat-UI-master/docs/assets/js/prettify.js" rel="stylesheet"></script>
    <script src="./Flat-UI-master/docs/assets/js/application.js" rel="stylesheet"></script>
    <meta charset="utf-8">
    <title>Pixel Fighter</title>
</head>

<body style="background-color:#000000;">
    <script>
        "use strict";

        let path = './resources/app/chara/';
        let chara_ = [];
        let charas = fs.readdirSync(path);
        let select = 0;
        let select_actor = function(n) {
            select = n;
            ipcRenderer.send('ChooseAction', charas[select]);
            window.location.href = './PF.action.html';
        };

        document.write("<div id='choose'>");
        for (let i = 0; i < charas.length; i++) {
            document.write('<a onclick="select_actor(' + i + ');"><div id=' + i + ' style="background-color:rgb(0, 0, 0);padding:1px;margin-bottom:5px;text-align:center;"></div></a>');
            chara_[i] = document.getElementById(i);
            chara_[i].innerHTML = '<h3 style="color:rgb(255, 0, 85);font-family:Microsoft JhengHei;">' + charas[i] + '</h3>';
        };
        document.write('</div></div>');
        chara_[0].style = "background-color:rgb(255, 255, 255);padding:1px;margin-bottom:5px;text-align:center;";
        window.onkeydown = function() {
            if (event.keyCode == 27) {
                window.location.href = "./index.html";
            };
            if ((event.keyCode == 40 || event.keyCode == 83) && select < charas.length - 1) {
                select++;
            } else if ((event.keyCode == 38 || event.keyCode == 87) && select > 0) {
                select--;
            }
            if (select >= 0 && select <= charas.length - 1) {
                chara_[select].style = "background-color:rgb(255, 255, 255);padding:1px;margin-bottom:5px;text-align:center;";

            }

            document.body.scrollTop = select * 84; //控制卷軸位置
            if (select > 0) {
                chara_[select - 1].style = "background-color:rgb(0,0,0);padding:1px;margin-bottom:5px;text-align:center;";
            }
            if (select < charas.length - 1) {
                chara_[select + 1].style = "background-color:rgb(0,0,0);padding:1px;margin-bottom:5px;text-align:center;";
            }

            if (event.keyCode == 13) {
                select_actor(select);
            }
        }
    </script>

</body>

</html>